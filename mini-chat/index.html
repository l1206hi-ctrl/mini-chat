<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8" />
  <title>Mini Chat</title>
  <link rel="stylesheet" href="style.css" />
</head>
<body>

  <div class="app-layout">
    <!-- 왼쪽: 캐릭터 목록 사이드바 -->
    <aside class="sidebar">
      <h2 class="app-title">Mini Chat</h2>
      <div class="sidebar-section">
        <div class="sidebar-header">
          <span>캐릭터 목록</span>
          <button id="newCharacterBtn" class="ghost-btn">+ 새 캐릭터</button>
        </div>
        <div id="character-buttons" class="character-list"></div>
      </div>
    </aside>

    <!-- 오른쪽 전체 영역 -->
    <div class="main-area">
      <!-- 상단 탭 -->
      <div class="top-tabs">
        <button class="tab-btn active" data-view="chat">채팅</button>
        <button class="tab-btn" data-view="characters">캐릭터 만들기</button>
        <button class="tab-btn" data-view="profile">내 프로필</button>
      </div>

      <!-- ===== 뷰 1: 채팅 ===== -->
      <section class="app-content" data-view="chat">
        <main class="chat-panel">
          <header class="chat-header">
            <div>
              <div id="currentCharacterName" class="char-name">기본 챗봇</div>
              <div id="currentCharacterTagline" class="char-tagline">
                무난하게 대화하는 기본 AI
              </div>
            </div>
          </header>

          <div id="messages" class="messages"></div>

          <div class="input-area">
            <textarea
              id="chatInput"
              rows="1"
              placeholder="메시지를 입력하세요."
            ></textarea>
            <button id="sendBtn">전송</button>
            <button id="sampleBtn">샘플 불러오기</button>
          </div>
        </main>
      </section>

      <!-- ===== 뷰 2: 캐릭터 만들기 ===== -->
      <section class="app-content" data-view="characters" style="display:none;">
        <aside class="detail-panel">
          <h3>캐릭터 설정</h3>

          <form id="characterForm" class="char-form">
            <label>
              이름
              <input id="charNameInput" type="text" />
            </label>

            <label>
              한 줄 소개
              <input id="charTaglineInput" type="text" />
            </label>

            <label>
              태그 (쉼표로 구분)
              <input id="charTagsInput" type="text" placeholder="예: 친구,반말,편안함" />
            </label>

            <label>
              시스템 프롬프트
              <textarea id="charSystemPromptInput" rows="6" placeholder="모델에게 줄 캐릭터 설명을 적어주세요."></textarea>
            </label>

            <label>
              말투
              <select id="charToneSelect">
                <option value="formal">존댓말</option>
                <option value="casual">반말</option>
              </select>
            </label>

            <label>
              세계관 / 배경 설정
              <textarea
                id="charWorldviewInput"
                rows="4"
                placeholder="예: 현대 한국과 비슷하지만, 사람들의 감정을 수치로 볼 수 있는 세계. 캐릭터는 감정 데이터를 분석하는 연구원이다."
              ></textarea>
            </label>

            <label>
              캐릭터 상세 설명 / 뒷이야기
              <textarea
                id="charDescriptionInput"
                rows="4"
                placeholder="예: 어릴 때부터 사람들의 감정에 민감했고, 겉으로는 차분하지만 속으로는 상대를 많이 신경쓴다. 겁이 많지만 노력해서 솔직하려고 한다."
              ></textarea>
            </label>

            <label>
              예시 대화
              <textarea
                id="charExampleDialoguesInput"
                rows="6"
                placeholder="예:
사용자: 오늘 기분이 별로야.
캐릭터: 무슨 일 있었어? 괜찮으면 천천히 얘기해줘. 난 네 편이야.

사용자: 나 너무 못난 것 같아.
캐릭터: 그런 생각이 드는 건 이해하지만, 최소한 난 널 그렇게 보지 않아."
              ></textarea>
            </label>

            <label>
              대화 시작 인사 (첫 메시지)
              <textarea
                id="charFirstMessageInput"
                rows="2"
                placeholder="예: 안녕, 난 ○○야. 오늘은 어떤 이야기부터 해볼까?"
              ></textarea>
            </label>

            <div class="char-form-buttons">
              <button type="button" id="saveCharacterBtn">저장</button>
              <button type="button" id="deleteCharacterBtn" class="danger-btn">삭제</button>
            </div>
          </form>
        </aside>
      </section>

      <!-- ===== 뷰 3: 내 프로필 (임시) ===== -->
      <section class="app-content" data-view="profile" style="display:none;">
        <aside class="detail-panel">
          <h3>내 프로필</h3>
          <p>여기에 나중에 프로필 입력 폼 넣을 예정!</p>
        </aside>
      </section>
    </div>
  </div>

  <!-- 생각 중 오버레이 -->
  <div id="thinkingOverlay" class="overlay hidden">
    <div class="dots">...</div>
  </div>

  <script type="module" src="./js/main.js"></script>
</body>
</html>

