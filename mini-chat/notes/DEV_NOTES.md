# Todo

- 모델 선택 드롭다운과 서버 요청 파라미터 연결(선호 모델/실제 사용 모델 표시 포함)
- 캐릭터별 기본 모델·temperature 프리셋 저장/적용
- 대화/캐릭터 설정 export · import (JSON)
- 모바일 입력창 고정 및 키보드 가림 이슈 대응
- 토큰/비용 대략 표시(UI에 요청당 토큰/비용 추정)
- 오류/예외 메시지 친절화(429·403·타임아웃·네트워크 장애 안내/재시도)
- 프로필 탭 입력/저장/프롬프트 반영
- 정적 한글 텍스트 인코딩 깨짐 수정(index.html 등)

---

# Done

- 모듈화된 클라이언트 구조(state/chatFlow/ui/events/store/tabs 등) + 기본 빌드 세팅
- 메시지 상태: 캐릭터별 localStorage 저장/복원, `clear` 커맨드, 전체 캐릭터 기록 일괄 삭제, 초깃값(firstMessage) 자동 주입, 빈 입력 시 자동 이어쓰기 프롬프트
- 대화 제어: 최신 사용자 메시지 편집 후 재전송, 최신 봇 답변 변형 저장·이전/다음 탐색, 재생성(variants), 중복 전송 방지 + 오버레이 표시
- 렌더링: 타이핑 효과, 나레이션/볼드 포맷팅, 타임스탬프, 최신 답변 액션 바
- 캐릭터 시스템: 기본 캐릭터 + 사용자 캐릭터 생성/수정/삭제(기본 캐릭터는 숨김 처리), 이름·태그라인·태그·말투/성격·세계관·설명·추가 system 프롬프트·첫 멘트·요약·이미지(URL/파일 업로드) 필드
- 예시 데이터: 대화 예시 모달(최대 5개, user/assistant 전환, 수정/삭제, 문자 수 카운트)과 시나리오 카드(화자 역할 지정, 편집/삭제)
- 시스템 프롬프트 빌더: 캐릭터 설정/태그/시나리오/첫 멘트를 자동 조합, 예시 대화 포함, 히스토리 문자 수 제한(예시 1,500자·히스토리 6,000자·최근 10~20개)
- 내 페르소나: 페르소나 모달로 입력 저장(localStorage) 후 요청에 포함
- 내비게이션/UI: 캐릭터 선택 버튼+그리드, 홈 버튼으로 캐릭터 그리드 전환, 탭(Chat/Characters/Profile), 아바타 프리뷰
- 서버/LLM: Express 정적 서빙 + OpenRouter 프록시, 우선순위 모델 목록과 403/429 시 폴백, persona·situation·가이드라인 시스템 메시지 주입, 온도/토큰/패널티 클램프, 오픈소스 모델용 세이프티 프리픽스, 포스트프로세스 훅(비활성 기본)

---

# FEATURES (현재 기능)

- 채팅: Enter 전송/Shift+Enter 줄바꿈, 생각중 오버레이, 타이핑 효과, 빈 입력 시 자동 이어쓰기, `clear` 명령
- 답변 관리: 최신 봇 답변 재생성·이전/다음 변형 보기, 최신 사용자 메시지 편집 후 재요청
- 기록: 캐릭터별 대화방과 히스토리 저장/복원, 전체 기록 일괄 삭제 지원
- 캐릭터: 사이드바/그리드 선택, 설정 폼(필드/시나리오/예시 대화), 첫 멘트 자동 삽입, 아바타 이미지 적용
- 프롬프트: 캐릭터 설정과 예시 대화를 포함한 system prompt 자동 생성, 사용자 페르소나 반영
- 백엔드: OpenRouter 실응답, 모델 폴백/가이드라인/클램프 적용

---

# NEXT FEATURES (로드맵)

- **모델 관련**
  - 모델 선택 드롭다운 + 요청 모델 표시
  - 캐릭터별 기본 모델/temperature 프리셋 저장 및 적용

- **캐릭터/대화 UX**
  - 캐릭터별 샘플 프롬프트/추천 질문 노출
  - 캐릭터별 자동 첫 인사 커스터마이즈(현재 firstMessage UI 존재)
  - 프로필 탭 실사용(입력·저장·프롬프트 반영)

- **데이터 관리**
  - 대화 및 캐릭터 설정 export/import(JSON)
  - 페르소나/설정 백업/복원 옵션

- **UI/UX**
  - 모바일 입력창 고정 및 키보드 튐 방지
  - 토큰/비용 카운터 UI
  - 정적 한글 텍스트 인코딩/문구 정리

- **고급 기능**
  - 스트리밍 응답
  - 여러 채팅방 탭/프로젝트 단위 분리
  - 캐릭터 목록/검색/정렬(마켓 느낌)


# Question / 모르는 것



## 설치, 실행방법

```bash
cd "C:\Users\pione\OneDrive\바탕 화면\mini-chat\mini-chat"
node server.mjs




잘 되면 이렇게 뜸 + 이 창은 열어둬야 함

✅ 서버 실행: http://localhost:3000


그 뒤 브라우저 주소창에

http://localhost:3000

## node_modules

npm install
